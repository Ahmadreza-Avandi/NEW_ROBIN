# راهنمای رفع مشکل Tenant Filtering

## وضعیت فعلی
✅ API ها درست کار میکنن و فقط داده‌های tenant خودشون رو برمیگردونن
✅ دیتابیس فقط داده‌های tenant "rabin" رو داره (هیچ داده demo وجود نداره)
❌ در مرورگر داره داده‌های اشتباه نمایش داده میشه

## علت احتمالی
مشکل از **کش مرورگر** یا **Local Storage** هست که داده‌های قدیمی رو ذخیره کرده.

## راه حل‌ها

### راه حل 1: پاک کردن کش مرورگر (سریع)

1. در مرورگر خودت، `F12` رو بزن تا Developer Tools باز بشه
2. به تب **Application** (یا **Storage** در Firefox) برو
3. از منوی سمت چپ:
   - **Local Storage** → پاک کن
   - **Session Storage** → پاک کن
   - **Cookies** → پاک کن
   - **Cache Storage** → پاک کن
4. صفحه رو Refresh کن با `Ctrl+Shift+R` (Hard Refresh)

### راه حل 2: باز کردن در حالت Incognito/Private

1. یه پنجره Incognito/Private باز کن
2. به `http://localhost:3000/rabin/dashboard/activities` برو
3. لاگین کن و ببین آیا مشکل حل شد

### راه حل 3: اضافه کردن Cache Busting به API Calls

اگر مشکل همچنان وجود داشت، باید کد صفحات رو تغییر بدیم تا از کش استفاده نکنن.

### راه حل 4: بررسی Network Tab

1. `F12` رو بزن
2. به تب **Network** برو
3. صفحه رو Refresh کن
4. روی درخواست `/api/tenant/activities` کلیک کن
5. در قسمت **Response** ببین چه داده‌هایی برگشته
6. اگر داده‌های اشتباه برگشته، یعنی مشکل از API هست
7. اگر داده‌های درست برگشته ولی در صفحه اشتباه نمایش داده میشه، یعنی مشکل از کد React هست

## تست نهایی

بعد از پاک کردن کش، این دستور رو اجرا کن:

```bash
node test-browser-api-calls.js
```

اگر خروجی نشون داد که همه فعالیت‌ها متعلق به tenant "rabin" هستند، یعنی API ها درست کار میکنن و مشکل فقط از کش مرورگر بود.

## اگر مشکل حل نشد

اگر بعد از پاک کردن کش مشکل حل نشد، لطفا:

1. یه اسکرین‌شات از صفحه بفرست
2. یه اسکرین‌شات از Network Tab بفرست (درخواست `/api/tenant/activities`)
3. Console رو چک کن ببین آیا خطایی هست

تا بتونم دقیق‌تر کمک کنم.
