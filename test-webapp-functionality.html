<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø¹Ù…Ù„Ú©Ø±Ø¯ ÙˆØ¨ Ø§Ù¾ - Ù…Ø¯ÛŒØ±ÛŒØª Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
            direction: rtl;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        
        .test-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background-color: #0056b3;
        }
        
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 3px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .url-link {
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
        .url-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ØªØ³Øª Ø¹Ù…Ù„Ú©Ø±Ø¯ ÙˆØ¨ Ø§Ù¾ - Ù…Ø¯ÛŒØ±ÛŒØª Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª</h1>
        
        <div class="test-section info">
            <h3>ğŸ“‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ³Øª</h3>
            <p><strong>URL Ù…Ø´ØªØ±ÛŒ:</strong> <a href="http://localhost:3000/rabin/dashboard/customers/98dad6eb-d387-11f0-8d2c-581122e4f0be" class="url-link" target="_blank">
                http://localhost:3000/rabin/dashboard/customers/98dad6eb-d387-11f0-8d2c-581122e4f0be
            </a></p>
            <p><strong>Ù…Ø´ØªØ±ÛŒ:</strong> Ø±Ø§Ø¨ÛŒÙ† (ID: 98dad6eb-d387-11f0-8d2c-581122e4f0be)</p>
            <p><strong>Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ ÙØ¹Ù„ÛŒ:</strong> 4 Ù…ÙˆØ±Ø¯</p>
            <p><strong>Ù…Ø­ØµÙˆÙ„Ø§Øª Ù‚Ø§Ø¨Ù„ Ø§Ø¶Ø§ÙÙ‡:</strong> 6 Ù…ÙˆØ±Ø¯</p>
        </div>

        <div class="test-section warning">
            <h3>âš ï¸ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§</h3>
            <ul>
                <li>Ø³Ø±ÙˆØ± Next.js Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø¨Ø§Ø´Ø¯ (localhost:3000)</li>
                <li>Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ø³ÛŒØ³ØªÙ… ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯</li>
                <li>Ø¯ÛŒØªØ§Ø¨ÛŒØ³ MySQL Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø¨Ø§Ø´Ø¯</li>
            </ul>
        </div>

        <div class="test-section">
            <h3>ğŸ” ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API</h3>
            
            <button class="test-button" onclick="testCustomerAPI()">ØªØ³Øª API Ù…Ø´ØªØ±ÛŒ</button>
            <button class="test-button" onclick="testProductsAPI()">ØªØ³Øª API Ù…Ø­ØµÙˆÙ„Ø§Øª</button>
            <button class="test-button" onclick="testInterestsAPI()">ØªØ³Øª API Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</button>
            
            <div id="api-results" class="result"></div>
        </div>

        <div class="test-section">
            <h3>ğŸŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ¨ Ø§Ù¾</h3>
            
            <button class="test-button" onclick="openCustomerPage()">Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ù…Ø´ØªØ±ÛŒ</button>
            <button class="test-button" onclick="testPageLoad()">ØªØ³Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡</button>
            
            <div id="webapp-results" class="result"></div>
        </div>

        <div class="test-section success">
            <h3>âœ… Ù…Ø±Ø§Ø­Ù„ ØªØ³Øª Ø¯Ø³ØªÛŒ</h3>
            <ol>
                <li>Ø±ÙˆÛŒ "Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ù…Ø´ØªØ±ÛŒ" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                <li>Ø¨Ù‡ ØªØ¨ "Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯" Ø¨Ø±ÙˆÛŒØ¯</li>
                <li>Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                <li>ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…ÙˆØ¬ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</li>
                <li>Ø³Ø·Ø­ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒ Ùˆ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯</li>
                <li>Ø±ÙˆÛŒ "Ø§ÙØ²ÙˆØ¯Ù†" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                <li>Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ù…Ø­ØµÙˆÙ„ Ø¨Ù‡ Ù„ÛŒØ³Øª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡</li>
                <li>Ø±ÙˆÛŒ Ø¢ÛŒÚ©ÙˆÙ† Ø­Ø°Ù Ú©Ù†Ø§Ø± ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø­ØµÙˆÙ„Ø§Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                <li>ØªØ£ÛŒÛŒØ¯ Ø­Ø°Ù Ø±Ø§ Ø¨Ø¯Ù‡ÛŒØ¯</li>
                <li>Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ù…Ø­ØµÙˆÙ„ Ø§Ø² Ù„ÛŒØ³Øª Ø­Ø°Ù Ø´Ø¯Ù‡</li>
            </ol>
        </div>

        <div class="test-section info">
            <h3>ğŸ”§ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ</h3>
            <p><strong>Ø§Ú¯Ø± ØµÙØ­Ù‡ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯:</strong></p>
            <ul>
                <li>Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ú©Ù‡ Ø³Ø±ÙˆØ± Next.js Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø§Ø³Øª</li>
                <li>Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø¯Ø± Ø³ÛŒØ³ØªÙ… ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯</li>
                <li>Ú©Ù†Ø³ÙˆÙ„ Ù…Ø±ÙˆØ±Ú¯Ø± Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø®Ø·Ø§Ù‡Ø§ÛŒ JavaScript Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯</li>
            </ul>
            
            <p><strong>Ø§Ú¯Ø± API Ù‡Ø§ Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯:</strong></p>
            <ul>
                <li>Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ MySQL Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ø§Ø³Øª</li>
                <li>Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ú©Ù‡ Ø¬Ø¯Ø§ÙˆÙ„ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù†Ø¯</li>
                <li>Network tab Ø¯Ø± Developer Tools Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯</li>
            </ul>
        </div>
    </div>

    <script>
        const CUSTOMER_ID = '98dad6eb-d387-11f0-8d2c-581122e4f0be';
        const TENANT_KEY = 'rabin';
        const BASE_URL = 'http://localhost:3000';

        function logResult(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString('fa-IR');
            element.innerHTML += `[${timestamp}] ${message}\n`;
            element.className = `result ${type}`;
        }

        async function testCustomerAPI() {
            logResult('api-results', 'ğŸ” ØªØ³Øª API Ù…Ø´ØªØ±ÛŒ...', 'info');
            
            try {
                const response = await fetch(`${BASE_URL}/api/tenant/customers/${CUSTOMER_ID}`, {
                    headers: {
                        'X-Tenant-Key': TENANT_KEY,
                        'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    logResult('api-results', `âœ… API Ù…Ø´ØªØ±ÛŒ: Ù…ÙˆÙÙ‚ - ${data.data.name}`, 'success');
                } else {
                    logResult('api-results', `âŒ API Ù…Ø´ØªØ±ÛŒ: ${data.message || 'Ø®Ø·Ø§'}`, 'error');
                }
            } catch (error) {
                logResult('api-results', `âŒ Ø®Ø·Ø§ Ø¯Ø± API Ù…Ø´ØªØ±ÛŒ: ${error.message}`, 'error');
            }
        }

        async function testProductsAPI() {
            logResult('api-results', 'ğŸ” ØªØ³Øª API Ù…Ø­ØµÙˆÙ„Ø§Øª...', 'info');
            
            try {
                const response = await fetch(`${BASE_URL}/api/tenant/products/list?customer_id=${CUSTOMER_ID}`, {
                    headers: {
                        'X-Tenant-Key': TENANT_KEY,
                        'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    logResult('api-results', `âœ… API Ù…Ø­ØµÙˆÙ„Ø§Øª: ${data.data.length} Ù…Ø­ØµÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯`, 'success');
                } else {
                    logResult('api-results', `âŒ API Ù…Ø­ØµÙˆÙ„Ø§Øª: ${data.message || 'Ø®Ø·Ø§'}`, 'error');
                }
            } catch (error) {
                logResult('api-results', `âŒ Ø®Ø·Ø§ Ø¯Ø± API Ù…Ø­ØµÙˆÙ„Ø§Øª: ${error.message}`, 'error');
            }
        }

        async function testInterestsAPI() {
            logResult('api-results', 'ğŸ” ØªØ³Øª API Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§...', 'info');
            
            try {
                const response = await fetch(`${BASE_URL}/api/tenant/customers/${CUSTOMER_ID}/interests`, {
                    headers: {
                        'X-Tenant-Key': TENANT_KEY,
                        'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    logResult('api-results', `âœ… API Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§: ${data.data.length} Ù…ÙˆØ±Ø¯`, 'success');
                } else {
                    logResult('api-results', `âŒ API Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§: ${data.message || 'Ø®Ø·Ø§'}`, 'error');
                }
            } catch (error) {
                logResult('api-results', `âŒ Ø®Ø·Ø§ Ø¯Ø± API Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§: ${error.message}`, 'error');
            }
        }

        function openCustomerPage() {
            const url = `${BASE_URL}/rabin/dashboard/customers/${CUSTOMER_ID}`;
            logResult('webapp-results', `ğŸŒ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ØµÙØ­Ù‡ Ù…Ø´ØªØ±ÛŒ: ${url}`, 'info');
            window.open(url, '_blank');
        }

        async function testPageLoad() {
            logResult('webapp-results', 'ğŸ” ØªØ³Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡...', 'info');
            
            try {
                const response = await fetch(`${BASE_URL}/rabin/dashboard/customers/${CUSTOMER_ID}`);
                
                if (response.ok) {
                    logResult('webapp-results', 'âœ… ØµÙØ­Ù‡ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯', 'success');
                } else {
                    logResult('webapp-results', `âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡: ${response.status}`, 'error');
                }
            } catch (error) {
                logResult('webapp-results', `âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„: ${error.message}`, 'error');
            }
        }

        // Auto-run basic tests on page load
        window.onload = function() {
            logResult('api-results', 'ğŸš€ Ø´Ø±ÙˆØ¹ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±...', 'info');
            setTimeout(testCustomerAPI, 1000);
            setTimeout(testProductsAPI, 2000);
            setTimeout(testInterestsAPI, 3000);
        };
    </script>
</body>
</html>