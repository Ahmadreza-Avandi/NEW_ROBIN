# ๐ต ูพุฎุด ุตุฏุง ุทููุงู ุจู ุตูุฑุช Streaming

## โ ูุดฺฉู ูุจู

```
๐ Text length: 1554
โ TTS API Error: 500 - ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ ุชุจุฏู ูุชู ุจู ุตุฏุง
```

**ุนูุช:** TTS API ููโุชูุงูุฏ ูุชูโูุง ุฎู ุทููุงู (ุจุด ุงุฒ 500-600 ฺฉุงุฑุงฺฉุชุฑ) ุฑุง ูพุฑุฏุงุฒุด ฺฉูุฏ.

---

## โ ุฑุงูโุญู: ุชูุณู ู ูพุฎุด ุชุฏุฑุฌ

### ูุงุจูุช ุฌุฏุฏ ุงุถุงูู ุดุฏู:

#### 1. ุชูุณู ุฎูุฏฺฉุงุฑ ูุชู

```typescript
function splitTextIntoChunks(text: string, maxLength = 500): string[] {
  // ุชูุณู ูุชู ุจู ุฌููุงุช ุจุฑ ุงุณุงุณ ุนูุงุฆู ููุทูโฺฏุฐุงุฑ
  // ูุฑ chunk ุญุฏุงฺฉุซุฑ 500 ฺฉุงุฑุงฺฉุชุฑ
}
```

**ูุซุงู:**
```
ูุชู ุงุตู: 1554 ฺฉุงุฑุงฺฉุชุฑ
โ
Chunk 1: 487 ฺฉุงุฑุงฺฉุชุฑ
Chunk 2: 495 ฺฉุงุฑุงฺฉุชุฑ  
Chunk 3: 572 ฺฉุงุฑุงฺฉุชุฑ
```

#### 2. ูพุฎุด ุชุฏุฑุฌ

```typescript
async function playAudio(text: string): Promise<void> {
  const chunks = splitTextIntoChunks(text, 500);
  
  for (let chunk of chunks) {
    await playAudioChunk(chunk);
    // ฺฉู ุชููู ุจู ูุทุนุงุช
    await delay(300ms);
  }
}
```

---

## ๐ฏ ูุฒุงุง

### โ ูพุฎุด ูุชูโูุง ุทููุงู
- ูุชูโูุง 1000+ ฺฉุงุฑุงฺฉุชุฑ ุจุฏูู ูุดฺฉู ูพุฎุด ูโุดููุฏ
- ูุฑ ูุทุนู ูุณุชูู ูพุฑุฏุงุฒุด ูโุดูุฏ

### โ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ
- ุตุฏุง ุณุฑุนโุชุฑ ุดุฑูุน ูโุดูุฏ (ูุงุฒ ุจู ุงูุชุธุงุฑ ุจุฑุง ฺฉู ูุชู ูุณุช)
- ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ุดุฑูุน ูพุงุณุฎ ุฑุง ุฒูุฏุชุฑ ุจุดููุฏ

### โ ูุงุจูุช ุงุทููุงู ุจุดุชุฑ
- ุงฺฏุฑ ฺฉ ูุทุนู ุฎุทุง ุฏุงุฏุ ุจูู ูุทุนุงุช ูพุฎุด ูโุดููุฏ
- Retry mechanism ุจุฑุง ูุฑ ูุทุนู ุฌุฏุงฺฏุงูู

### โ ูุฏุฑุช ุจูุชุฑ ููุงุจุน
- TTS API ูุดุงุฑ ฺฉูุชุฑ ูโุจูุฏ
- Timeout ฺฉูุชุฑ ุงุชูุงู ูโุงูุชุฏ

---

## ๐ ููุงุณู ูุจู ู ุจุนุฏ

### ูุจู (ุจุฏูู ุชูุณู):

```
ูุชู 1554 ฺฉุงุฑุงฺฉุชุฑ
โ
ุงุฑุณุงู ุจู TTS API
โ
โ Error 500 (ูุชู ุฎู ุทููุงู)
โ
โ ูฺ ุตุฏุง ูพุฎุด ููโุดูุฏ
```

### ุจุนุฏ (ุจุง ุชูุณู):

```
ูุชู 1554 ฺฉุงุฑุงฺฉุชุฑ
โ
ุชูุณู ุจู 3 ูุทุนู (487, 495, 572)
โ
ูุทุนู 1 โ TTS API โ โ ูพุฎุด
โ (300ms delay)
ูุทุนู 2 โ TTS API โ โ ูพุฎุด
โ (300ms delay)
ูุทุนู 3 โ TTS API โ โ ูพุฎุด
โ
โ ฺฉู ูุชู ูพุฎุด ุดุฏ
```

---

## ๐งช ุชุณุช

### ุชุณุช ุจุง ูุชู ฺฉูุชุงู (< 500 ฺฉุงุฑุงฺฉุชุฑ):

```
ูุฑูุฏ: "ุณูุงูุ ูู ุฑุงุจู ูุณุชู."
โ
1 chunk
โ
ูพุฎุด ูุณุชูู
```

### ุชุณุช ุจุง ูุชู ูุชูุณุท (500-1000 ฺฉุงุฑุงฺฉุชุฑ):

```
ูุฑูุฏ: ูุชู 750 ฺฉุงุฑุงฺฉุชุฑ
โ
2 chunks (400 + 350)
โ
ูพุฎุด ุชุฏุฑุฌ
```

### ุชุณุช ุจุง ูุชู ุทููุงู (> 1000 ฺฉุงุฑุงฺฉุชุฑ):

```
ูุฑูุฏ: ูุชู 1554 ฺฉุงุฑุงฺฉุชุฑ
โ
3 chunks (487 + 495 + 572)
โ
ูพุฎุด ุชุฏุฑุฌ
```

---

## ๐ง ุชูุธูุงุช

### ุชุบุฑ ุญุฏุงฺฉุซุฑ ุทูู ูุฑ ูุทุนู:

```typescript
// ุฏุฑ ฺฉุฏ
const chunks = splitTextIntoChunks(text, 500); // 500 ฺฉุงุฑุงฺฉุชุฑ

// ุจุฑุง ูุชูโูุง ุฎู ุทููุงู:
const chunks = splitTextIntoChunks(text, 400); // 400 ฺฉุงุฑุงฺฉุชุฑ

// ุจุฑุง TTS API ููโุชุฑ:
const chunks = splitTextIntoChunks(text, 800); // 800 ฺฉุงุฑุงฺฉุชุฑ
```

### ุชุบุฑ ุชุงุฎุฑ ุจู ูุทุนุงุช:

```typescript
// ุชุงุฎุฑ ูุนู: 300ms
await new Promise(resolve => setTimeout(resolve, 300));

// ุจุฏูู ุชุงุฎุฑ (ุณุฑุนโุชุฑ):
await new Promise(resolve => setTimeout(resolve, 0));

// ุชุงุฎุฑ ุจุดุชุฑ (ุทุจุนโุชุฑ):
await new Promise(resolve => setTimeout(resolve, 500));
```

---

## ๐ ูุงฺฏโูุง ุงูุชุธุงุฑ

### ูุชู ฺฉูุชุงู:

```
๐ต Playing audio in 1 chunk(s)
๐ต Playing chunk 1/1 (245 chars)
๐ต Attempt 1/3 - Requesting TTS for text length: 245
โ TTS Response received
โ Audio playback completed
```

### ูุชู ุทููุงู:

```
๐ Text split into 3 chunks: [487, 495, 572]
๐ต Playing audio in 3 chunk(s)

๐ต Playing chunk 1/3 (487 chars)
๐ต Attempt 1/3 - Requesting TTS for text length: 487
โ TTS Response received
โ Audio playback completed

๐ต Playing chunk 2/3 (495 chars)
๐ต Attempt 1/3 - Requesting TTS for text length: 495
โ TTS Response received
โ Audio playback completed

๐ต Playing chunk 3/3 (572 chars)
๐ต Attempt 1/3 - Requesting TTS for text length: 572
โ TTS Response received
โ Audio playback completed
```

---

## ๐ ุนุจโุงุจ

### ูุดฺฉู: ฺฉ ูุทุนู ุฎุทุง ูโุฏูุฏ

**ุฑูุชุงุฑ ูุนู:**
- ูุทุนูโูุง ูุจู ูพุฎุด ูโุดููุฏ โ
- ูุทุนู ุฎุทุง 3 ุจุงุฑ ุชูุงุด ูโฺฉูุฏ
- ุงฺฏุฑ ุจุงุฒ ูู ุฎุทุง ุฏุงุฏุ ุจู ูุทุนู ุจุนุฏ ูโุฑูุฏ

**ูุงฺฏ:**
```
๐ต Playing chunk 2/3
โ Attempt 1/3 failed
โ Attempt 2/3 failed
โ Attempt 3/3 failed
โ๏ธ  Chunk 2 failed, continuing to chunk 3
๐ต Playing chunk 3/3
โ Audio playback completed
```

### ูุดฺฉู: ุตุฏุง ูุทุน ูโุดูุฏ

**ุนูุช:** ุชุงุฎุฑ ุจู ูุทุนุงุช ุฎู ฺฉู ุงุณุช

**ุฑุงูโุญู:**
```typescript
// ุงูุฒุงุด ุชุงุฎุฑ
await new Promise(resolve => setTimeout(resolve, 500));
```

### ูุดฺฉู: ูพุฎุด ุฎู ฺฉูุฏ ุงุณุช

**ุนูุช:** ุชุงุฎุฑ ุจู ูุทุนุงุช ุฒุงุฏ ุงุณุช

**ุฑุงูโุญู:**
```typescript
// ฺฉุงูุด ุชุงุฎุฑ
await new Promise(resolve => setTimeout(resolve, 100));
```

---

## ๐ ุจูุจูุฏูุง ุขูุฏู (ุงุฎุชุงุฑ)

### 1. Pre-loading ูุทุนุงุช ุจุนุฏ

```typescript
// ุฏุฑุงูุช ูุทุนู ุจุนุฏ ุฏุฑ ูพุณโุฒููู
const nextChunkPromise = fetchTTS(chunks[i + 1]);
await playCurrentChunk();
const nextChunk = await nextChunkPromise;
```

### 2. ููุงุด ูพุดุฑูุช

```typescript
// ููุงุด "ุฏุฑ ุญุงู ูพุฎุด ูุทุนู 2 ุงุฒ 3"
setProgress(`${chunkIndex + 1}/${chunks.length}`);
```

### 3. ุงูฺฉุงู ุชููู

```typescript
// ุฏฺฉูู ุชููู ุจุฑุง ฺฉุงุฑุจุฑ
if (stopRequested) {
  break;
}
```

---

## โ ูุชุฌูโฺฏุฑ

**ูุจู:**
- โ ูุชูโูุง ุทููุงู ูพุฎุด ููโุดุฏูุฏ
- โ Error 500 ุจุฑุง ูุชูโูุง > 600 ฺฉุงุฑุงฺฉุชุฑ
- โ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุถุนู

**ุจุนุฏ:**
- โ ูุชูโูุง ุทููุงู (1000+ ฺฉุงุฑุงฺฉุชุฑ) ูพุฎุด ูโุดููุฏ
- โ ุชูุณู ุฎูุฏฺฉุงุฑ ุจู ูุทุนุงุช ููุงุณุจ
- โ ูพุฎุด ุชุฏุฑุฌ ู ุฑูุงู
- โ Retry mechanism ุจุฑุง ูุฑ ูุทุนู
- โ ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ

---

**ุชุงุฑุฎ:** $(date)
**ูุถุนุช:** โ ูพุงุฏูโุณุงุฒ ุดุฏ
**ูุงุฒ ุจู ุชุณุช:** ุจูู
