# ๐ ุชุบุฑุงุช ุงูุฌุงู ุดุฏู ุจุฑุง ุฏูพูู ูุณุชูู School-Proj

## ๐ฏ ูุฏู
ุฏูพูู ูพุฑูฺู School-Proj ุฑู ุฏุงููู `sch.ahmadreza-avandi.ir` ุจู ุตูุฑุช ฺฉุงููุงู ูุณุชูู ุงุฒ ูพุฑูฺู CRM

## ๐ง ุชุบุฑุงุช ุงุนูุงู ุดุฏู

### 1. ุชุบุฑ ูพูุฑุชโูุง ุฏุฑ `docker-compose.yml`

ุชูุงู ูพูุฑุชโูุง ุชุบุฑ ฺฉุฑุฏูุฏ ุชุง ุจุง ูพุฑูฺู CRM ุชุฏุงุฎู ูุฏุงุดุชู ุจุงุดูุฏ:

| ุณุฑูุณ | ูพูุฑุช ูุจู | ูพูุฑุช ุฌุฏุฏ |
|-------|-----------|-----------|
| Next.js | 3000 | 3003 |
| Nest.js | 3001 | 3002 |
| Python | 5000 | 5001 |
| MySQL | 3306 | 3307 |
| Redis | 6379 | 6380 |
| phpMyAdmin | 8081 | 8083 |
| Redis Commander | 8082 | 8084 |

### 2. ุจูุจูุฏ `nginx-config.conf`

- ุชุบุฑ upstream names ุจู `school_*` ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุชุฏุงุฎู
- ุชุบุฑ ูพูุฑุชโูุง proxy_pass ุจู ูพูุฑุชโูุง ุฌุฏุฏ
- ุญูุธ ุชูุงู ุชูุธูุงุช SSL ู ุงููุช

### 3. ุจูุจูุฏ `deploy.sh`

- ุงุถุงูู ุดุฏู ุชูุถุญุงุช ฺฉุงูู ุฏุฑ header
- ุจูุจูุฏ ูุฏุฑุช ุฎุทุงูุง
- ุงุถุงูู ุดุฏู ุจฺฉุงูพ ุฎูุฏฺฉุงุฑ ุงุฒ ฺฉุงููฺฏโูุง ูุจู
- ุจูุจูุฏ ุจุฑุฑุณ ุณูุงูุช ุณุฑูุณโูุง ุจุง ูพูุฑุชโูุง ุฌุฏุฏ
- ุงุถุงูู ุดุฏู rollback ุฎูุฏฺฉุงุฑ ุฏุฑ ุตูุฑุช ุฎุทุง

### 4. ุงุณฺฉุฑูพุชโูุง ุฌุฏุฏ ุงุฌุงุฏ ุดุฏู

#### `stop.sh` - ุชููู ูพุฑูฺู
- ุชููู ุชูุงู containers
- ฺฏุฒูู ูพุงฺฉโุณุงุฒ volumes ู images
- ุชุงุฏ ูุจู ุงุฒ ุงุฌุฑุง

#### `restart.sh` - ุฑโุงุณุชุงุฑุช ุณุฑุน
- ุฑโุงุณุชุงุฑุช ฺฉู ูพุฑูฺู ุง ฺฉ ุณุฑูุณ ุฎุงุต
- ุจุฏูู ูุงุฒ ุจู rebuild
- ููุงุด ูุงฺฏโูุง ุงุฎุฑ

#### `status.sh` - ุจุฑุฑุณ ูุถุนุช
- ููุงุด ูุถุนุช ุชูุงู containers
- ุจุฑุฑุณ ุณูุงูุช ุณุฑูุณโูุง
- ููุงุด ุงุณุชูุงุฏู ุงุฒ ููุงุจุน
- ููุงุด ูุงฺฏโูุง ุงุฎุฑ
- ููฺฉโูุง ุฏุณุชุฑุณ
- ฺฏุฒูู ูุดุงูุฏู ูุงฺฏโูุง ุฒูุฏู

#### `setup-ssl.sh` - ุฏุฑุงูุช ฺฏูุงู SSL
- ุจุฑุฑุณ ู ูุตุจ Certbot
- ุจุฑุฑุณ DNS
- ุฏุฑุงูุช ุฎูุฏฺฉุงุฑ ฺฏูุงู SSL
- ุชูุธู ุชูุฏุฏ ุฎูุฏฺฉุงุฑ
- ูุฏุฑุช ุฎุทุงูุง

#### `setup-server.sh` - ุขูุงุฏูโุณุงุฒ ุณุฑูุฑ
- ูุตุจ Docker ู Docker Compose
- ูุตุจ Nginx
- ูุตุจ Certbot
- ุจุฑุฑุณ ูพูุฑุชโูุง
- ุชูุธู ูุงุฑูุงู
- ุชุณุช ุณุณุชู

### 5. ูุณุชูุฏุงุช

#### `DEPLOY-README.md`
ุฑุงูููุง ฺฉุงูู ุดุงูู:
- ุฌุฏูู ูพูุฑุชโูุง
- ุณุงุฎุชุงุฑ ูพุฑูฺู
- ูุฑุงุญู ุฏูพูู
- ุฏุณุชูุฑุงุช ูุฏุฑุช
- ููฺฉโูุง ุฏุณุชุฑุณ
- ุนุจโุงุจ
- ูุงูุชูุฑูฺฏ
- ูฺฉุงุช ููู

#### `CHANGES.md` (ุงู ูุงู)
ุฎูุงุตู ุชูุงู ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุฏูพูู ุงููู (ุงููู ุจุงุฑ)

```bash
# 1. ุขูุงุฏูโุณุงุฒ ุณุฑูุฑ
cd school-proj
sudo bash setup-server.sh

# 2. ุฏุฑุงูุช SSL
sudo bash setup-ssl.sh

# 3. ุฏูพูู ูพุฑูฺู
bash deploy.sh
```

### ุฏูพููโูุง ุจุนุฏ

```bash
cd school-proj
bash deploy.sh
```

### ูุฏุฑุช ุฑูุฒูุฑู

```bash
# ุจุฑุฑุณ ูุถุนุช
bash status.sh

# ุฑโุงุณุชุงุฑุช
bash restart.sh

# ุชููู
bash stop.sh

# ูุดุงูุฏู ูุงฺฏโูุง
bash status.sh logs
```

## โ ูุฒุงุง ุงู ุชุบุฑุงุช

1. **ุฌุฏุงุณุงุฒ ฺฉุงูู**: ูฺ ุชุฏุงุฎู ุจุง ูพุฑูฺู CRM ูุฏุงุฑุฏ
2. **ูพูุฑุชโูุง ูุฌุฒุง**: ูุฑ ุณุฑูุณ ูพูุฑุช ุงุฎุชุตุงุต ุฏุงุฑุฏ
3. **ูุฏุฑุช ุขุณุงู**: ุงุณฺฉุฑูพุชโูุง ุณุงุฏู ู ฺฉุงุฑุจุฑุฏ
4. **ุฎูุฏฺฉุงุฑุณุงุฒ**: ุชูุงู ูุฑุงุญู ุฎูุฏฺฉุงุฑ ุงุณุช
5. **ุงููุช**: SSL ู ุชูุธูุงุช ุงููุช ฺฉุงูู
6. **ูุงูุชูุฑูฺฏ**: ุงุจุฒุงุฑูุง ุจุฑุฑุณ ูุถุนุช
7. **ูุณุชูุฏุงุช**: ุฑุงูููุง ฺฉุงูู ู ุฌุงูุน
8. **ุนุจโุงุจ**: ุงุจุฒุงุฑูุง debug ู troubleshooting

## ๐ ุงููุช

- ุชูุงู ุงุฑุชุจุงุทุงุช ุงุฒ ุทุฑู HTTPS
- SSL certificate ุงุฒ Let's Encrypt
- ุชูุฏุฏ ุฎูุฏฺฉุงุฑ ฺฏูุงู
- Headers ุงููุช ุฏุฑ Nginx
- ุฌุฏุงุณุงุฒ network ุฏุฑ Docker

## ๐ ูุงูุชูุฑูฺฏ

- ุจุฑุฑุณ ุฎูุฏฺฉุงุฑ ุณูุงูุช ุณุฑูุณโูุง
- ููุงุด ุงุณุชูุงุฏู ุงุฒ ููุงุจุน
- ูุงฺฏโูุง ูุฑฺฉุฒ
- ุงุนูุงูโูุง ุฎุทุง

## ๐ Rollback

ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู:
1. ฺฉุงููฺฏโูุง ูุจู ุจฺฉุงูพ ูโุดููุฏ
2. ุงูฺฉุงู ุจุงุฒฺฏุดุช ุจู ูุณุฎู ูุจู
3. ุญูุธ ุฏุชุงุจุณ ู volumes

## ๐ ูพุดุชุจุงู

ุจุฑุง ูุดฺฉูุงุช:
1. `bash status.sh` - ุจุฑุฑุณ ูุถุนุช
2. `docker-compose logs [service]` - ูุดุงูุฏู ูุงฺฏโูุง
3. ูุฑุงุฌุนู ุจู `DEPLOY-README.md`

---

**ุชุงุฑุฎ**: $(date)
**ูุณุฎู**: 1.0.0
**ูุถุนุช**: ุขูุงุฏู ุจุฑุง ุฏูพูู โ
